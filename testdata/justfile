# Justfile with go install commands
# https://github.com/casey/just

# Install linting tools
lint:
    go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest
    golangci-lint run

# Install development tools
dev-tools:
    go install github.com/cosmtrek/air@latest
    go install github.com/golang/mock/mockgen@latest
    go install golang.org/x/tools/cmd/goimports@latest

# Run tests with gotestsum
test:
    go install gotest.tools/gotestsum@latest
    gotestsum --format testname

# Security scan
security:
    go install github.com/securego/gosec/v2/cmd/gosec@latest
    gosec ./...
    go install golang.org/x/vuln/cmd/govulncheck@latest
    govulncheck ./...

# Generate code
generate:
    go install golang.org/x/tools/cmd/stringer@v0.27.0
    go generate ./...

# Build with goreleaser
release:
    go install github.com/goreleaser/goreleaser@latest
    goreleaser release --snapshot --clean
